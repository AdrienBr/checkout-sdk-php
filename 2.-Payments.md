The Checkout.com Payments API provides a unified integration experience for a variety of payment methods.

## Request a payment
The examples demonstrate the minimum information required to request a payment. For full details of the available parameters, see the [documentation](https://api-reference.checkout.com/#tag/Payments/paths/~1payments/post). In order to authorize a payment only, set `capture` to false.

### Full Card
For PCI compliant merchants only, this allows you to provide the full card details. The CVV number requirement depends on the account set up.

```php
$method = new Checkout\Models\Payments\CardSource('4242424242424242', 01, 2020);
$method->cvv = '100';
$payment = new Checkout\Models\Payments\Payment($method, 'GBP');
$payment->capture = false;
$payment->amount = 999; // = 9.99
$response = $checkout->payments()
                     ->request($payment);
```

### Source ID
After requesting a card payment you will be returned a source ID that can be used for subsequent payments from the same card.

```php
$method = new Checkout\Models\Payments\IdSource($sourceID);
$payment = new Checkout\Models\Payments\Payment($method, 'GBP');
$payment->capture = false;
$payment->amount = 999; // = 9.99
$response = $checkout->payments()
                     ->request($payment);
```

### Tokens
This is the recommended integration for one-time payments and uses a card token generated by Checkout Frames, Apple Pay or Google Pay tokens to request a payment. Learn more about tokens [here](https://github.com/checkout/checkout-sdk-php/wiki/1.-Tokens).

```php
$method = new Checkout\Models\Payments\TokenSource($tokenID);
$payment = new Checkout\Models\Payments\Payment($method, 'GBP');
$payment->capture = false;
$payment->amount = 999; // = 9.99
$response = $checkout->payments()
                     ->request($payment);
```

### Network Tokens
Same as with Tokens, you can make payments using Visa network tokens generated through the Visa token service.

```php
$method = new Checkout\Models\Payments\NetworkTokenSource($tokenID);
$payment = new Checkout\Models\Payments\Payment($method, 'GBP');
$payment->capture = false;
$payment->amount = 999; // = 9.99
$response = $checkout->payments()
                     ->request($payment);
```


***

ℹ️ Click [here](https://github.com/checkout/checkout-sdk-php/wiki/3.-Alternative-Payments) for alternative payment methods.

***
## 3-D Secure
Using 3-D Secure adds an extra level of security to prevent fraudulent payments. The cardholder is required to complete an additional step in the checkout process to verify their identity. Learn more about 3-D Secure [here](https://docs.checkout.com/docs/3d-secure-payments).

```php
$payment = new Checkout\Models\Payments\Payment($method, 'GBP');
$payment->threeDs = new Checkout\Models\Payments\ThreeDs(TRUE);
$response = $checkout->payments()
                     ->request($payment);
$redirectionUrl = $response->getRedirection();
```

## Idempotency
Occasionally, you may need to retry a payment due to a disrupted API call such as a network error or timeout. Our payments API supports idempotency, so you can safely retry requests without a duplicate payment taking place. Learn more about [Idempotency](https://docs.checkout.com/docs/retry-a-payment).

```php
$payment = new Checkout\Models\Payments\Payment($method, 'GBP');
$payment->setIdempotencyKey($uuid);
```
***


## Details
Get the details of a payment by passing its ID. This ID can be retrieved either from the payment request response (`$paymentID = $response->getId()` or `$paymentID = $response->id`) or from previous payment details (`$paymentID = $details->getId()` or `$paymentID = $details->id`).

```php
$details = $checkout->payments()->details($paymentID);
```


## Capture
If a payment is requested with `$payment->capture = false`, you must either command capture the payment or capture it from The Hub otherwise the payment will only be authorized. Manual capture is not allowed if `$payment->capture = true`.
Authorized payments can be captured either in full or partially by setting the amount(the remaining amount will be automatically voided).

```php
$payment = new Capture($paymentID);
// Partial capture: $payment->amount = 999;
$capture = $checkout->payments()->capture($payment);
```

## Void
If a payment has not been captured yet, a manual void is possible by running the void command.

```php
$payment = new Voids($paymentID);
$void = $checkout->payments()->void($payment);
```

## Refund
Captured payments can be refunded either in full or partially. Once processed, a refund cannot be cancelled. A payment can be refunded multiple times, but cannot exceed the original payment amount.

```php
$payment = new Refund($paymentID);
// Partial capture: $payment->amount = 999;
$refund = $checkout->payments()->refund($paymentID);
```

## Actions
Get all the actions associated with a payment ordered by processing date in descending order (latest first).

```php
$actions = $checkout->payments()->actions($paymentID);
```